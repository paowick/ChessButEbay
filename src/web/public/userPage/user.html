<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../../userPage/style.css">
    <script src="../../userPage/user.js"></script>
    <title>User</title>
    <link rel="icon" type="image/x-icon" href="../assets/image/icon.ico">
</head>

<body>
    <script src="https://code.jquery.com/jquery.min.js"></script>
    <div id="nav-ph"></div>
    <script>
        $(function () {
            $("#nav-ph").load("../../assets/component/navbar/navbar.html")
        })
    </script>
    <main>
        <div class="user-con">
            <div class="profile-main" id="profile-main">
                <img id="profile-pic" alt="">
            </div>
            <div id="name-main" align="left"></div>
            <div id="FLname" align="left"></div>
            <div id="email" align="left"></div>
            <div id="score" align="left"></div>
            <div class="button-con">
                <button onclick="ChangePassword()">Change Password</button>
                <button onclick="Edit()">Edit</button>
            </div>

        </div>
        <div class="user-game-info">
            <h1>Game History</h1>
            <div class="history-con"></div>
        </div>
    </main>

    <div class="edit-pop" id="edit-pop"> 
        <div class="close-con" onclick="document.getElementById('editclose').click();">
            <span class="close">&times;</span>
        </div>
        <form id="edit-form" method="post" enctype="multipart/form-data">
            <div class="profile-pop" id="profile-pop">
                <img id="profile-pic-pop" alt="">
            </div>
        </form>
        <div class="edit-icon" onclick="document.getElementById('up-but').click();">
            <img src="../assets/image/edit-profile-icon.png" alt="">
            <input type="file" name="file" id="up-but" hidden action="/">
        </div>

        <div class="h3-con">
            <h3>User Name: </h3>
            <input id="name-pop" type="text">
        </div>
        <div class="h3-con">
            <h3>First Name: </h3>
            <input id="Fname-pop" type="text">
        </div>
        <div class="h3-con">
            <h3>Last Name: </h3>
            <input id="Lname-pop" type="text">
        </div>
        <div class="button-con">
            <button onclick="save()">Save</button>
        </div>
    </div>


    <div class="changePassword-pop" id="changePassword-pop">
        <div class="close-con" onclick="document.getElementById('changepassclose').click();">
            <span class="close">&times;</span>
        </div>
        <div class="h3-con">
            <h3>Old Password: </h3>
            <input id="oldPw-pop" type="password">
        </div>
        <div class="h3-con">
            <h3>New Password: </h3>
            <input id="newPw-pop" type="password">
        </div>
        <div class="h3-con">
            <h3>Confirm Password: </h3>
            <input id="conPw-pop" type="password">
        </div>
        <div class="button-pw">
            <button onclick="changePw()">Change Password</button>
        </div>
        <div class="err" id="err"></div>
        

    </div>
</body>

<script>
    // Get the input element and the preview element
    const input = document.getElementById('up-but');
    const preview = document.getElementById('profile-pic-pop');


    // Listen for changes to the input element
    input.addEventListener('change', function () {
        Array.from(input.files).splice(1, 1)
        // If a file is selected
        if (input.files && input.files[0]) {
            // Create a FileReader object
            const reader = new FileReader();

            // When the file is loaded
            reader.addEventListener('load', function () {
                // Set the preview image source to the loaded data URL
                preview.src = reader.result;
            });

            // Read the file as a data URL
            reader.readAsDataURL(input.files[0]);
        }
    });
</script>
<button type="button" id="changepassclose" class="hide-butt" onclick="ChangePassword()"></button>
<button type="button" id="editclose" class="hide-butt" onclick="Edit()"></button>
</html>